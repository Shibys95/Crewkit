// utils/normalize.ts

/** 
 * Приводит любую строку к «каноничной» форме:
 * - переводит в нижний регистр
 * - убирает диакритические знаки (умляуты, акценты)
 * - заменяет дефисы и подчёркивания на пробелы
 * - удаляет все лишние символы (кроме букв/цифр/пробелов)
 * - склеивает множественные пробелы в один
 */
export function normalize(str: string): string {
  return str
    .toLowerCase()
    .normalize("NFD")                   // разбить «буква + знак» на два символа
    .replace(/[\u0300-\u036f]/g, "")    // убрать все диакритики
    .replace(/[-_–—]/g, " ")            // дефисы → пробел
    .replace(/[^\w\s]/g, "")            // оставить только буквы, цифры и пробелы
    .trim()                             // обрезать по краям
    .replace(/\s+/g, " ");              // заменить множественные пробелы одним
}
